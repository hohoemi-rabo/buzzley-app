# Twitch バズり配信検索サービス 要件定義書 v1.0

## 1. プロジェクト概要

### 1.1 サービス名

Twitch バズり配信検索サービス（仮称）

### 1.2 サービス概要

Twitch において「フォロワー数は少ないが視聴者数が多い＝バズっている配信」を発見できる検索サービス。視聴者には新しい配信者との出会いを、配信者には市場分析の機会を提供する。

### 1.3 プロジェクトの目的

- **視聴者向け**: 埋もれている才能ある配信者を発見する機会の提供
- **配信者向け**: 自身の配信パフォーマンスと競合状況の把握支援

### 1.4 差別化ポイント

TwitchMetrics や SullyGnome などの既存分析ツールとは異なり、「バズり度」という独自指標により、フォロワー数が少ない中でも注目を集めている配信を直接検出・提示する点で差別化を図る。

## 2. ビジネス要件

### 2.1 ターゲットユーザー

- **主要ターゲット**: 日本の Twitch 視聴者（年齢層は限定なし）
- **副次ターゲット**: 日本の Twitch 配信者（競合分析・自己分析用途）

### 2.2 提供価値

- **視聴者価値**: 新興配信者の発見、トレンドの早期キャッチ
- **配信者価値**: 市場動向の把握、自身のパフォーマンス相対評価

### 2.3 成功指標（KPI）

- サービス利用者数の増加
- 検索実行数の増加
- ユーザー滞在時間
  ※具体的な目標値は運用開始後に設定

## 3. 機能要件

### 3.1 MVP 機能一覧

#### 3.1.1 検索機能

| 機能                 | 詳細                                     | 優先度 |
| -------------------- | ---------------------------------------- | ------ |
| ゲームタイトル検索   | 部分一致検索による配信ゲームの絞り込み   | 高     |
| 視聴者数フィルタ     | 範囲指定（最小値～最大値）による絞り込み | 高     |
| フォロワー数フィルタ | 範囲指定（最小値～最大値）による絞り込み | 高     |
| バズり度自動計算     | 視聴者数 ÷ フォロワー数の自動算出        | 高     |

#### 3.1.2 表示機能

| 項目             | 詳細                                 | 優先度 |
| ---------------- | ------------------------------------ | ------ |
| 配信者名表示     | Twitch ユーザー名とリンク            | 高     |
| 視聴者数表示     | リアルタイム視聴者数                 | 高     |
| フォロワー数表示 | 現在のフォロワー数                   | 高     |
| バズり度表示     | 計算結果の％表示                     | 高     |
| 配信タイトル     | 配信のタイトル表示                   | 高     |
| サムネイル       | 配信のプレビュー画像                 | 高     |
| 無限スクロール   | 10 件ずつ追加読み込み                | 中     |
| リアルタイム更新 | 定期的な情報更新（30 秒～ 1 分間隔） | 中     |

#### 3.1.3 ソート機能

| ソート基準     | 説明                 | デフォルト |
| -------------- | -------------------- | ---------- |
| バズり度順     | バズり度の高い順     | ✓          |
| 視聴者数順     | 視聴者数の多い順     | -          |
| フォロワー数順 | フォロワー数の多い順 | -          |

### 3.2 バズり判定ロジック

#### 3.2.1 対象配信者

- フォロワー数: 1 人～ 5,000 人

#### 3.2.2 判定基準

**新人層（フォロワー 1 ～ 1,000 人）**

- 条件 1: 視聴者数 ÷ フォロワー数 ≥ 20%
- 条件 2: 視聴者数 ≥ 20 人
- 判定: 条件 1 AND 条件 2 を満たす場合「バズり」

**中堅層（フォロワー 1,001 ～ 5,000 人）**

- 条件 1: 視聴者数 ÷ フォロワー数 ≥ 10%
- 条件 2: 視聴者数 ≥ 100 人
- 判定: 条件 1 AND 条件 2 を満たす場合「バズり」

### 3.3 将来実装予定機能

| 機能                 | 説明                     | フェーズ |
| -------------------- | ------------------------ | -------- |
| 言語フィルタ         | 日本語配信の絞り込み     | Phase 2  |
| 検索履歴保存         | ユーザー別の検索履歴管理 | Phase 3  |
| お気に入り機能       | 配信者のブックマーク     | Phase 3  |
| ダークモード         | UI 配色の切り替え        | Phase 2  |
| 配信者ダッシュボード | 詳細分析画面             | Phase 4  |
| 成長率分析           | 時系列データ分析         | Phase 4  |

## 4. 非機能要件

### 4.1 パフォーマンス要件

| 項目             | 要件                                    | 備考                                |
| ---------------- | --------------------------------------- | ----------------------------------- |
| レスポンスタイム | 検索実行から結果表示まで 5 秒以内を目標 | 初期は調整しながら最適化            |
| 同時接続数       | 100 ユーザーの同時利用を想定            | スケーリングは利用状況により調整    |
| 可用性           | 99%以上                                 | Cloudflare Workers のインフラに依存 |

### 4.2 セキュリティ要件

- Twitch API キーの安全な管理（環境変数使用）
- Rate Limit 対策の実装
- XSS 対策（ユーザー入力のサニタイズ）

### 4.3 ユーザビリティ要件

- 直感的で分かりやすい UI 設計
- モダンでクリーンなビジュアルデザイン
- PC 優先のレイアウト（モバイル対応は段階的に実装）
- エラーメッセージの分かりやすい表示

## 5. システム構成

### 5.1 技術スタック

| カテゴリ       | 技術               | バージョン/詳細      |
| -------------- | ------------------ | -------------------- |
| フレームワーク | Next.js            | 15 (App Router)      |
| 言語           | TypeScript         | 5.x                  |
| スタイリング   | Tailwind CSS       | v3.4.17              |
| デプロイ環境   | Cloudflare Workers | -                    |
| データベース   | なし               | MVP フェーズでは不要 |
| 認証           | なし               | 将来実装予定         |
| 外部 API       | Twitch API         | 無料プラン利用       |
| アクセス解析   | Google Analytics   | GA4                  |

### 5.2 システムアーキテクチャ

```
[ユーザー]
    ↓
[Cloudflare CDN/Workers]
    ↓
[Next.js アプリケーション]
    ↓
[Twitch API]
```

### 5.3 API 利用制限対策

- Cloudflare KV を利用したキャッシュ実装
- Rate Limit 管理ロジックの実装
- エラーハンドリングとリトライ処理

## 6. 開発・運用要件

### 6.1 開発環境

- 開発手法: Claude Code によるペアプログラミング
- バージョン管理: Git/GitHub
- 個人開発のため、柔軟なスケジュール管理

### 6.2 テスト要件

| テスト種別   | 内容                     | 実施タイミング |
| ------------ | ------------------------ | -------------- |
| 単体テスト   | 主要関数のテスト         | 開発時         |
| 統合テスト   | API 連携テスト           | リリース前     |
| ベータテスト | 実ユーザーによる動作確認 | MVP 完成後     |

### 6.3 運用要件

- エラー監視: 将来的に検討
- アクセス解析: Google Analytics 4 導入
- バズり判定ルールの定期的な見直し

## 7. 制約事項

### 7.1 技術的制約

- Twitch API 無料プランの Rate Limit 制限
- Cloudflare Workers 無料プランの制限
- リアルタイムデータ取得の頻度制限

### 7.2 リソース制約

- 個人開発のため、開発リソースは限定的
- 初期費用は最小限に抑える

## 8. リリース計画

### 8.1 フェーズ分け

**Phase 1 (MVP)**

- 基本的な検索・フィルタ機能
- バズり度計算・表示
- 無限スクロール実装
- Google Analytics 導入

**Phase 2**

- ダークモード対応
- 言語フィルタ追加
- UI の改善

**Phase 3**

- データベース導入（Cloudflare D1）
- 検索履歴機能
- お気に入り機能

**Phase 4**

- 認証機能
- 配信者ダッシュボード
- 成長率分析

### 8.2 スケジュール

- 明確な期限は設定せず、個人開発のペースで進行
- MVP 完成後、ベータテストを実施
- フィードバックを元に改善を継続

## 9. 用語定義

| 用語     | 定義                                       |
| -------- | ------------------------------------------ |
| バズり度 | 視聴者数をフォロワー数で割った値（％表示） |
| 新人層   | フォロワー数 1 ～ 1,000 人の配信者         |
| 中堅層   | フォロワー数 1,001 ～ 5,000 人の配信者     |
| MVP      | Minimum Viable Product（実用最小限の製品） |

## 10. 更新履歴

| バージョン | 更新日     | 更新内容 | 更新者 |
| ---------- | ---------- | -------- | ------ |
| v1.0       | 2024/XX/XX | 初版作成 | -      |

---

## 付録 A: Twitch API 利用に関する補足

### 必要な API エンドポイント（予定）

- GET /streams - ライブ配信情報の取得
- GET /users - ユーザー情報（フォロワー数等）の取得
- GET /games - ゲーム情報の取得
- GET /search/channels - チャンネル検索

### 必要なスコープ

- 公開情報のみ取得のため、特別なスコープは不要（予定）

### Rate Limit 対策

1. レスポンスキャッシュ（30 秒～ 1 分）
2. リクエストのバッチ処理
3. エラー時の指数バックオフ実装

## 付録 B: UI/UX ガイドライン

### デザイン原則

1. **シンプル**: 余計な装飾を排除し、機能に集中
2. **直感的**: 説明なしで使い方が分かる設計
3. **高速**: ユーザーを待たせない軽快な動作
4. **モダン**: 最新の Web デザイントレンドを適用

### カラースキーム（案）

- プライマリカラー: Twitch 紫（#9146FF）
- セカンダリカラー: グレー系
- アクセントカラー: 緑（バズり表示用）
- 背景: 白（将来的にダークモード対応）

### レスポンシブ対応

- Phase 1: デスクトップ優先（1280px 以上）
- Phase 2 以降: タブレット・モバイル対応追加
